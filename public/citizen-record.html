<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
        <script src="js/jquery-1.8.2.min.js"></script>
        <script src="js/angular.min.js"></script>
        <script> 
        var mymodule=angular.module("myOwnModule",[]);
        var myController=mymodule.controller("myController",function($scope){   

            $scope.doDelete=function(name)
            {
                alert(name);
            }
            $scope.jsonAry;
            // $scope.doFetch=function()
            //     {
                   

            //         var url="/showAll";
            //           $http.get(url).then(kuchFxGood,kuchFxBad); 
            //           function kuchFxGood(jsonResponse)
            //           {
            //              // alert(JSON.stringify(jsonResponse.data));
            //               $scope.jsonAryOrg=jsonResponse.data;
            //           }
            //           function kuchFxBad(jsonResponse)
            //           {
            //               alert(JSON.stringify(jsonResponse.data));
            //           }


            //     }
            $scope.jsonAryCity;
            $scope.doFetchAllCity=function()
                {
                   

                    var url="/fetchRecord";
                      $http.get(url).then(kuchFxGood,kuchFxBad); 
                      function kuchFxGood(jsonResponse)
                      {
                         alert(JSON.stringify(jsonResponse.data));
                          $scope.jsonAryCity=jsonResponse.data;
                      }
                      function kuchFxBad(jsonResponse)
                      {
                          alert(JSON.stringify(jsonResponse.data));
                      }


                }

        })
        </script>
    <title>Citizen Records</title>
</head>
<body ng-app="myOwnModule" ng-controller="myController">
<div class="container">
    <nav class="navbar navbar-expand-lg navbar-light bg-danger justify-content-center" style=" background: linear-gradient(to bottom, #33ccff 0%, #000066 100%);">
        <a class="navbar-brand" href="#">CITIZEN RECORDS</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="COLLAPSE"
            data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
            aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
    </nav>
    <br>
<center>
   Cities:
   <select>
       <option ng-repeat="obj in jsonAry" value="obj.city">obj.city</option>
   </select>

</p>   
        
<input type="button" value="Fetch All Records" ng-click="doFetchAll();">
   

   <p>
       
        All Records
        <table width="400" border="1">
             <tr ng-repeat="obj in jsonAryOrg">
                 <td>{{$index+1}}</td>
                    <td>{{obj.emailid}}</td> 
                    
                    <td>{{obj.name}}</td>
                    <td>{{obj.mobile}}</td>
                    <td align="center">
                            <img src="uploads/{{obj.profilepic}}" width="50" height="50" alt="">
                    </td>
                    <td>{{obj.picpath}}</td>

                    <td align="center">
                        <input type="button" value="Delete" ng-click="doDelete(obj.emailid);">
                    </td>
 
             </tr>
        </table>
    </p>
</center>
</div>
</body>
</html>
